{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","lib\\browser\\base64.js","lib\\browser\\request.js","lib\\browser\\source.js","lib\\browser\\storage.js","lib\\error.js","lib\\fingerprint.js","lib\\index.js","lib\\upload.js","node_modules/extend/index.js","node_modules/querystringify/index.js","node_modules/requires-port/index.js","node_modules/url-parse/index.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","tus","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","encode","btoa","data","unescape","encodeURIComponent","isSupported","newRequest","resolveUrl","XMLHttpRequest","origin","link","_urlParse2","default","toString","getSource","FileSource","file","_classCallCheck","_file","size","start","end","slice","CordovaFileSource","callback","reader","FileReader","onload","Uint8Array","result","onerror","err","readAsArrayBuffer","input","PhoneGap","Cordova","cordova","setItem","getItem","removeItem","hasStorage","key","localStorage","SECURITY_ERR","QUOTA_EXCEEDED_ERR","canStoreURLs","value","DetailedError","error","causingErr","arguments","undefined","xhr","_this","_possibleConstructorReturn","Object","getPrototypeOf","message","originalRequest","causingError","status","responseText","fingerprint","options","name","type","lastModified","endpoint","join","defaultOptions","_window","Blob","prototype","Upload","_upload2","_storage","Base64","Storage","_fingerprint2","resume","onProgress","onChunkComplete","onSuccess","onError","headers","chunkSize","Infinity","withCredentials","uploadUrl","uploadSize","overridePatchMethod","retryDelays","removeFingerprintOnSuccess","_extend2","url","_xhr","_fingerprint","_offset","_aborted","_size","_source","_retryAttempt","_retryTimeout","_offsetBeforeRetry","_emitError","source","isNaN","errorCallback","shouldResetDelays","isOnline","navigator","onLine","shouldRetry","inStatusCategory","delay","setTimeout","_resumeUpload","resumedUrl","_createUpload","abort","close","clearTimeout","_error2","bytesSent","bytesTotal","bytesAccepted","setRequestHeader","_this2","_request","open","_emitXhrError","location","getResponseHeader","_emitSuccess","_startUpload","_setupXHR","metadata","encodeMetadata","send","_this3","offset","parseInt","_emitProgress","_this4","_emitChunkComplete","upload","onprogress","lengthComputable","loaded","fileChunk","chunk","encoded","push","category","hasOwn","hasOwnProperty","toStr","isArray","arr","Array","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","constructor","extend","src","copy","copyIsArray","clone","target","deep","has","decode","decodeURIComponent","replace","querystring","query","parser","part","exec","querystringify","prefix","pairs","stringify","parse","required","port","protocol","split","qs","protocolre","slashes","rules","sanitize","address","NaN","ignore","hash","lolcation","loc","finaldestination","Url","pathname","test","href","extractProtocol","match","toLowerCase","rest","resolve","relative","base","path","concat","last","unshift","up","splice","extracted","instruction","index","instructions","indexOf","charAt","host","hostname","username","password","auth","set","fn","pop","char","ins"],"mappings":"AAAA,CAAA,SAAAA,GAAA,SAAAC,WAAA,gBAAAC,UAAA,YAAA,CAAAA,OAAAD,QAAAD,QAAA,UAAAG,UAAA,YAAAA,OAAAC,IAAA,CAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAA,UAAAC,UAAA,YAAA,CAAAD,EAAAC,WAAA,UAAAC,UAAA,YAAA,CAAAF,EAAAE,WAAA,UAAAC,QAAA,YAAA,CAAAH,EAAAG,SAAA,CAAAH,EAAAI,KAAAJ,EAAAK,IAAAV,OAAA,WAAA,GAAAG,QAAAD,OAAAD,OAAA,OAAA,SAAAU,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,SAAAC,UAAA,YAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,GAAAmB,SAAAD,UAAA,YAAAA,OAAA,KAAA,GAAAH,GAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAC,QAAAzB,OAAAD,uFCIgB2B,OAAAA,mBAFDtB,UAARuB,cAAAA,IAEA,SAASD,QAAOE,MACrB,MAAOD,MAAKE,SAASC,mBAAmBF,QAGnC,GAAMG,aAAAhC,QAAAgC,YAAc,QAAU3B,+HCLrB4B,WAAAA,mBAIAC,WAAAA,mLAJT,QAASD,cACd,MAAO,IAAI5B,QAAO8B,eAGb,QAASD,YAAWE,OAAQC,MACjC,MAAO,IAAAC,YAAAC,QAAQF,KAAMD,QAAQI,4oBCyBfC,UAAAA,6JAjCVC,uBACJ,QADIA,YACQC,MAAMC,gBAAApC,KADdkC,WAEFlC,MAAKqC,MAAQF,IACbnC,MAAKsC,KAAOH,KAAKG,kBAHfJ,8CAMEK,MAAOC,KACX,MAAOxC,MAAKqC,MAAMI,MAAMF,MAAOC,sDAP7BN,kBAaAQ,8BACJ,QADIA,mBACQP,MAAMC,gBAAApC,KADd0C,kBAEF1C,MAAKqC,MAAQF,IACbnC,MAAKsC,KAAOH,KAAKG,kBAHfI,qDAMGH,MAAOC,IAAKG,UACjB,GAAIC,QAAS,GAAIC,WACjBD,QAAOE,OAAS,WACdH,SAAS,GAAII,YAAWH,OAAOI,SAEjCJ,QAAOK,QAAU,SAACC,KAChBP,SAAS,KAAMO,KAEjBN,QAAOO,kBAAkBnD,KAAKqC,MAAMI,MAAMF,MAAOC,uDAd/CE,qBAoBC,SAAST,WAAUmB,OACxB,SAAWvD,QAAOwD,UAAY,mBAAsBxD,QAAOyD,SAAW,mBAAsBzD,QAAO0D,SAAW,YAAa,CACzH,MAAO,IAAIb,mBAAkBU,OAM/B,SAAWA,OAAMX,QAAU,kBAAqBW,OAAMd,OAAS,YAAa,CAC1E,MAAO,IAAIJ,YAAWkB,OAGxB,KAAM,IAAIxC,OAAM,qMCrBF4C,QAAAA,gBAKAC,QAAAA,gBAKAC,WAAAA,UAhChB,IAAIC,YAAa,KACjB,KACEA,WAAa,gBAAkB9D,OAI/B,IAAI+D,KAAM,YACVC,cAAaL,QAAQI,IAAKC,aAAaJ,QAAQG,MAE/C,MAAO1D,GAIP,GAAIA,EAAEW,OAASX,EAAE4D,cAAgB5D,EAAEW,OAASX,EAAE6D,mBAAoB,CAChEJ,WAAa,UACR,CACL,KAAMzD,IAIH,GAAM8D,cAAAxE,QAAAwE,aAAeL,UAErB,SAASH,SAAQI,IAAKK,OAC3B,IAAKN,WAAY,MACjB,OAAOE,cAAaL,QAAQI,IAAKK,OAG5B,QAASR,SAAQG,KACtB,IAAKD,WAAY,MACjB,OAAOE,cAAaJ,QAAQG,KAGvB,QAASF,YAAWE,KACzB,IAAKD,WAAY,MACjB,OAAOE,cAAaH,WAAWE,i6BCpC3BM,0CAAAA,qBACJ,SADIA,eACQC,OAAsC,GAA/BC,YAA+BC,UAAArD,QAAA,GAAAqD,UAAA,KAAAC,UAAlB,KAAkBD,UAAA,EAAA,IAAZE,KAAYF,UAAArD,QAAA,GAAAqD,UAAA,KAAAC,UAAN,KAAMD,UAAA,EAAAjC,iBAAApC,KAD9CkE,cAC8C,IAAAM,OAAAC,2BAAAzE,KAAA0E,OAAAC,eAD9CT,eAC8CnD,KAAAf,KAC1CmE,MAAMS,SAEZJ,OAAKK,gBAAkBN,GACvBC,OAAKM,aAAeV,UAEpB,IAAIQ,SAAUT,MAAMS,OACpB,IAAIR,YAAc,KAAM,CACtBQ,SAAA,eAA0BR,WAAWpC,WAEvC,GAAIuC,KAAO,KAAM,CACfK,SAAA,6CAAwDL,IAAIQ,OAA5D,oBAAsFR,IAAIS,aAA1F,IAEFR,MAAKI,QAAUA,OAbiC,OAAAJ,aAD9CN,gBAAsBtD,uBAkBbsD,6ICZSe,WAAT,SAASA,aAAY9C,KAAM+C,SACxC,OACE,MACA/C,KAAKgD,KACLhD,KAAKiD,KACLjD,KAAKG,KACLH,KAAKkD,aACLH,QAAQI,UACRC,KAAK,uQCVFC,iCAAAA,cACP,IAAIhE,iBAAA,EAEJ,UAAW3B,UAAW,YAAa,CAAA,GAAA4F,SAEF5F,MAFE,IAE1B8B,gBAF0B8D,QAE1B9D,cAF0B,IAEV+D,MAFUD,QAEVC,IAEvBlE,aACEG,gBACA+D,YACOA,MAAKC,UAAUlD,QAAU,eAE7B,CAELjB,YAAc,KAMhB/B,OAAOD,SACLoG,OAAAC,SAAA9D,QACAP,YAAAA,YACAwC,aAAA8B,SAzBM9B,aA0BNwB,eAAAA,ggCCnBUO,iFACAC,sfAEZ,GAAMR,iBACJF,SAAU,KACVL,YAAAgB,cAAAlE,QACAmE,OAAQ,KACRC,WAAY,KACZC,gBAAiB,KACjBC,UAAW,KACXC,QAAS,KACTC,WACAC,UAAWC,SACXC,gBAAiB,MACjBC,UAAW,KACXC,WAAY,KACZC,oBAAqB,MACrBC,YAAa,KACbC,2BAA4B,UAGxBnB,mBACJ,QADIA,QACQzD,KAAM+C,SAAS9C,gBAAApC,KADvB4F,OAEF5F,MAAKkF,SAAU,EAAA8B,SAAAjF,SAAO,QAAUyD,eAAgBN,QAGhDlF,MAAKmC,KAAOA,IAGZnC,MAAKiH,IAAM,IAGXjH,MAAKkH,KAAO,IAGZlH,MAAKmH,aAAe,IAGpBnH,MAAKoH,QAAU,IAGfpH,MAAKqH,SAAW,KAGhBrH,MAAKsH,MAAQ,IAKbtH,MAAKuH,QAAU,IAGfvH,MAAKwH,cAAgB,CAGrBxH,MAAKyH,cAAgB,IAGrBzH,MAAK0H,mBAAqB,eArCxB9B,4CAwCI,GAAApB,OAAAxE,IACN,IAAImC,MAAOnC,KAAKmC,IAEhB,KAAKA,KAAM,CACTnC,KAAK2H,WAAW,GAAI/G,OAAM,6CAC1B,QAGF,IAAKZ,KAAKkF,QAAQI,WAAatF,KAAKkF,QAAQyB,UAAW,CACrD3G,KAAK2H,WAAW,GAAI/G,OAAM,yDAC1B,QAGF,GAAIgH,QAAS5H,KAAKuH,SAAU,EAAAA,QA3ExBtF,WA2EkCE,KAAMnC,KAAKkF,QAAQsB,UAIzD,IAAIxG,KAAKkF,QAAQ0B,YAAc,KAAM,CACnC,GAAItE,OAAQtC,KAAKkF,QAAQ0B,UACzB,IAAIiB,MAAMvF,MAAO,CACf,KAAM,IAAI1B,OAAM,yDAGlBZ,KAAKsH,MAAQhF,SACR,CACL,GAAIA,MAAOsF,OAAOtF,IAIlB,IAAIA,MAAQ,KAAM,CAChB,KAAM,IAAI1B,OAAM,0HAGlBZ,KAAKsH,MAAQhF,KAGf,GAAIwE,aAAc9G,KAAKkF,QAAQ4B,WAC/B,IAAIA,aAAe,KAAM,CACvB,GAAIpC,OAAOiB,UAAU3D,SAASjB,KAAK+F,eAAiB,iBAAkB,CACpE,KAAM,IAAIlG,OAAM,qEACX,EAAA,WACL,GAAIkH,eAAgBtD,MAAKU,QAAQoB,OACjC9B,OAAKU,QAAQoB,QAAU,SAACpD,KAEtBsB,MAAKU,QAAQoB,QAAUwB,aAKvB,IAAIC,mBAAoBvD,MAAK4C,SAAW,MAAS5C,MAAK4C,QAAU5C,MAAKkD,kBACrE,IAAIK,kBAAmB,CACrBvD,MAAKgD,cAAgB,EAGvB,GAAIQ,UAAW,IACf,UAAWnI,UAAW,aACnB,aAAeA,SACfA,OAAOoI,UAAUC,SAAW,MAAO,CACjCF,SAAW,MAQhB,GAAIG,aAAc3D,MAAKgD,cAAgBV,YAAY9F,QACjCkC,IAAI2B,iBAAmB,OACtBuD,iBAAiBlF,IAAI2B,gBAAgBE,OAAQ,MAC9CiD,QAElB,KAAKG,YAAa,CAChB3D,MAAKmD,WAAWzE,IAChB,QAGF,GAAImF,OAAQvB,YAAYtC,MAAKgD,gBAE7BhD,OAAKkD,mBAAqBlD,MAAK4C,OAC/B5C,OAAKU,QAAQyB,UAAYnC,MAAKyC,GAE9BzC,OAAKiD,cAAgBa,WAAW,WAC9B9D,MAAKjC,SACJ8F,aAQTrI,KAAKqH,SAAW,KAGhB,IAAIrH,KAAKiH,KAAO,KAAM,CACpBjH,KAAKuI,eACL,QAIF,GAAIvI,KAAKkF,QAAQyB,WAAa,KAAM,CAChC3G,KAAKiH,IAAMjH,KAAKkF,QAAQyB,SACxB3G,MAAKuI,eACL,QAIJ,GAAIvI,KAAKkF,QAAQgB,OAAQ,CACrBlG,KAAKmH,aAAenH,KAAKkF,QAAQD,YAAY9C,KAAMnC,KAAKkF,QACxD,IAAIsD,YAAaxC,QAAQvC,QAAQzD,KAAKmH,aAEtC,IAAIqB,YAAc,KAAM,CACpBxI,KAAKiH,IAAMuB,UACXxI,MAAKuI,eACL,SAKRvI,KAAKyI,sDAIL,GAAIzI,KAAKkH,OAAS,KAAM,CACtBlH,KAAKkH,KAAKwB,OACV1I,MAAKuH,QAAQoB,OACb3I,MAAKqH,SAAW,KAGlB,GAAIrH,KAAKyH,eAAiB,KAAM,CAC9BmB,aAAa5I,KAAKyH,cAClBzH,MAAKyH,cAAgB,0DAIXlD,IAAKrB,IAAKkB,YACtBpE,KAAK2H,WAAW,GAAAkB,SAAA9G,QAAkBmB,IAAKkB,WAAYG,oDAG1CrB,KACT,SAAWlD,MAAKkF,QAAQoB,UAAY,WAAY,CAC9CtG,KAAKkF,QAAQoB,QAAQpD,SAChB,CACL,KAAMA,0DAKR,SAAWlD,MAAKkF,QAAQmB,YAAc,WAAY,CAChDrG,KAAKkF,QAAQmB,iEAUHyC,UAAWC,YACvB,SAAW/I,MAAKkF,QAAQiB,aAAe,WAAY,CACjDnG,KAAKkF,QAAQiB,WAAW2C,UAAWC,2EAapBvC,UAAWwC,cAAeD,YAC3C,SAAW/I,MAAKkF,QAAQkB,kBAAoB,WAAY,CACtDpG,KAAKkF,QAAQkB,gBAAgBI,UAAWwC,cAAeD,yDAUjDxE,KACRvE,KAAKkH,KAAO3C,GAEZA,KAAI0E,iBAAiB,gBAAiB,QACtC,IAAI1C,SAAUvG,KAAKkF,QAAQqB,OAE3B,KAAK,GAAIpB,QAAQoB,SAAS,CACxBhC,IAAI0E,iBAAiB9D,KAAMoB,QAAQpB,OAGrCZ,IAAImC,gBAAkB1G,KAAKkF,QAAQwB,sEAUrB,GAAAwC,QAAAlJ,IACd,KAAKA,KAAKkF,QAAQI,SAAU,CAC1BtF,KAAK2H,WAAW,GAAI/G,OAAM,gEAC1B,QAGF,GAAI2D,MAAM,EAAA4E,SAnRN1H,aAoRJ8C,KAAI6E,KAAK,OAAQpJ,KAAKkF,QAAQI,SAAU,KAExCf,KAAIzB,OAAS,WACX,IAAKsF,iBAAiB7D,IAAIQ,OAAQ,KAAM,CACtCmE,OAAKG,cAAc9E,IAAK,GAAI3D,OAAM,kDAClC,QAGF,GAAI0I,UAAW/E,IAAIgF,kBAAkB,WACrC,IAAID,UAAY,KAAM,CACpBJ,OAAKG,cAAc9E,IAAK,GAAI3D,OAAM,2CAClC,QAGFsI,OAAKjC,KAAM,EAAAkC,SAlSGzH,YAkSQwH,OAAKhE,QAAQI,SAAUgE,SAE7C,IAAIJ,OAAK5B,QAAU,EAAG,CAEpB4B,OAAKM,cACLN,QAAK3B,QAAQoB,OACb,QAGF,GAAIO,OAAKhE,QAAQgB,OAAQ,CACvBF,QAAQxC,QAAQ0F,OAAK/B,aAAc+B,OAAKjC,KAG1CiC,OAAK9B,QAAU,CACf8B,QAAKO,eAGPlF,KAAItB,QAAU,SAACC,KACbgG,OAAKG,cAAc9E,IAAK,GAAI3D,OAAM,gCAAiCsC,KAGrElD,MAAK0J,UAAUnF,IACfA,KAAI0E,iBAAiB,gBAAiBjJ,KAAKsH,MAG3C,IAAIqC,UAAWC,eAAe5J,KAAKkF,QAAQyE,SAC3C,IAAIA,WAAa,GAAI,CACjBpF,IAAI0E,iBAAiB,kBAAmBU,UAG5CpF,IAAIsF,KAAK,4DAUK,GAAAC,QAAA9J,IACd,IAAIuE,MAAM,EAAA4E,SA3UN1H,aA4UJ8C,KAAI6E,KAAK,OAAQpJ,KAAKiH,IAAK,KAE3B1C,KAAIzB,OAAS,WACX,IAAKsF,iBAAiB7D,IAAIQ,OAAQ,KAAM,CACtC,GAAI+E,OAAK5E,QAAQgB,QAAUkC,iBAAiB7D,IAAIQ,OAAQ,KAAM,CAG5DiB,QAAQtC,WAAWoG,OAAK3C,cAQ1B,GAAI5C,IAAIQ,SAAW,IAAK,CACtB+E,OAAKT,cAAc9E,IAAK,GAAI3D,OAAM,gDAClC,QAGF,IAAKkJ,OAAK5E,QAAQI,SAAU,CAE1BwE,OAAKT,cAAc9E,IAAK,GAAI3D,OAAM,mFAClC,QAIFkJ,OAAK7C,IAAM,IACX6C,QAAKrB,eACL,QAGF,GAAIsB,QAASC,SAASzF,IAAIgF,kBAAkB,iBAAkB,GAC9D,IAAI1B,MAAMkC,QAAS,CACjBD,OAAKT,cAAc9E,IAAK,GAAI3D,OAAM,wCAClC,QAGF,GAAII,QAASgJ,SAASzF,IAAIgF,kBAAkB,iBAAkB,GAC9D,IAAI1B,MAAM7G,QAAS,CACjB8I,OAAKT,cAAc9E,IAAK,GAAI3D,OAAM,wCAClC,QAKF,GAAImJ,SAAW/I,OAAQ,CACrB8I,OAAKG,cAAcjJ,OAAQA,OAC3B8I,QAAKN,cACL,QAGFM,OAAK1C,QAAU2C,MACfD,QAAKL,eAGPlF,KAAItB,QAAU,SAACC,KACb4G,OAAKT,cAAc9E,IAAK,GAAI3D,OAAM,gCAAiCsC,KAGrElD,MAAK0J,UAAUnF,IACfA,KAAIsF,KAAK,0DAUI,GAAAK,QAAAlK,IAIb,IAAIA,KAAKqH,SAAU,CACjB,OAGF,GAAI9C,MAAM,EAAA4E,SA3ZN1H,aAgaJ,IAAIzB,KAAKkF,QAAQ2B,oBAAqB,CACpCtC,IAAI6E,KAAK,OAAQpJ,KAAKiH,IAAK,KAC3B1C,KAAI0E,iBAAiB,yBAA0B,aAC1C,CACL1E,IAAI6E,KAAK,QAASpJ,KAAKiH,IAAK,MAG9B1C,IAAIzB,OAAS,WACX,IAAKsF,iBAAiB7D,IAAIQ,OAAQ,KAAM,CACtCmF,OAAKb,cAAc9E,IAAK,GAAI3D,OAAM,kDAClC,QAGF,GAAImJ,QAASC,SAASzF,IAAIgF,kBAAkB,iBAAkB,GAC9D,IAAI1B,MAAMkC,QAAS,CACjBG,OAAKb,cAAc9E,IAAK,GAAI3D,OAAM,wCAClC,QAGFsJ,OAAKD,cAAcF,OAAQG,OAAK5C,MAChC4C,QAAKC,mBAAmBJ,OAASG,OAAK9C,QAAS2C,OAAQG,OAAK5C,MAE5D4C,QAAK9C,QAAU2C,MAEf,IAAIA,QAAUG,OAAK5C,MAAO,CACxB,GAAI4C,OAAKhF,QAAQ6B,4BAA8BmD,OAAKhF,QAAQgB,OAAQ,CAGlEF,QAAQtC,WAAWwG,OAAK/C,cAI1B+C,OAAKV,cACLU,QAAK3C,QAAQoB,OACb,QAGFuB,OAAKT,eAGPlF,KAAItB,QAAU,SAACC,KAEb,GAAIgH,OAAK7C,SAAU,CACjB,OAGF6C,OAAKb,cAAc9E,IAAK,GAAI3D,OAAM,yCAA2CsJ,OAAK9C,SAAUlE,KAI9F,IAAI,UAAYqB,KAAK,CACnBA,IAAI6F,OAAOC,WAAa,SAACnK,GACvB,IAAKA,EAAEoK,iBAAkB,CACvB,OAGFJ,OAAKD,cAAc1H,MAAQrC,EAAEqK,OAAQL,OAAK5C,QAI9CtH,KAAK0J,UAAUnF,IAEfA,KAAI0E,iBAAiB,gBAAiBjJ,KAAKoH,QAC3C7C,KAAI0E,iBAAiB,eAAgB,kCAErC,IAAI1G,OAAQvC,KAAKoH,OACjB,IAAI5E,KAAMxC,KAAKoH,QAAUpH,KAAKkF,QAAQsB,SAKtC,IAAIhE,MAAQiE,UAAYjE,IAAMxC,KAAKsH,MAAO,CACxC9E,IAAMxC,KAAKsH,MAGb,SAAWzH,QAAOwD,UAAY,mBAAsBxD,QAAOyD,SAAW,mBAAsBzD,QAAO0D,SAAW,YAAa,CACzHvD,KAAKuH,QAAQ9E,MAAMF,MAAOC,IAAK,SAACgI,UAAWrG,OACzC,GAAIA,MAAO,CACT+F,OAAKvC,WAAW,GAAAkB,SAAA9G,QAAkB,gDAAgDQ,MAAM,SAASC,IAAI,UAAU0H,OAAK5C,MAAM,IAAKnD,OAC/H,QAEFI,IAAIsF,KAAKW,iBAEN,CACL,GAAIC,OAAQzK,KAAKuH,QAAQ9E,MAAMF,MAAOC,IACtC+B,KAAIsF,KAAKY,OAIXzK,KAAKiK,cAAcjK,KAAKoH,QAASpH,KAAKsH,iBAlepC1B,UAseN,SAASgE,gBAAeD,UACpB,IAAK5D,OAAOvE,YAAa,CACrB,MAAO,GAGX,GAAIkJ,WAEJ,KAAK,GAAI9G,OAAO+F,UAAU,CACtBe,QAAQC,KAAK/G,IAAM,IAAMmC,OAAO5E,OAAOwI,SAAS/F,OAGpD,MAAO8G,SAAQnF,KAAK,KASxB,QAAS6C,kBAAiBrD,OAAQ6F,UAChC,MAAQ7F,SAAU6F,UAAY7F,OAAU6F,SAAW,IAGrDhF,OAAOJ,eAAiBA,+BAETI,gKC9hBf,YAEA,IAAAiF,QAAAnG,OAAAiB,UAAAmF,cACA,IAAAC,OAAArG,OAAAiB,UAAA3D,QAEA,IAAAgJ,SAAA,QAAAA,SAAAC,KACA,SAAAC,OAAAF,UAAA,WAAA,CACA,MAAAE,OAAAF,QAAAC,KAGA,MAAAF,OAAAhK,KAAAkK,OAAA,iBAGA,IAAAE,eAAA,QAAAA,eAAAC,KACA,IAAAA,KAAAL,MAAAhK,KAAAqK,OAAA,kBAAA,CACA,MAAA,OAGA,GAAAC,mBAAAR,OAAA9J,KAAAqK,IAAA,cACA,IAAAE,kBAAAF,IAAAG,aAAAH,IAAAG,YAAA5F,WAAAkF,OAAA9J,KAAAqK,IAAAG,YAAA5F,UAAA,gBAEA,IAAAyF,IAAAG,cAAAF,oBAAAC,iBAAA,CACA,MAAA,OAKA,GAAA1H,IACA,KAAAA,MAAAwH,KAAA,EAEA,aAAAxH,OAAA,aAAAiH,OAAA9J,KAAAqK,IAAAxH,KAGAnE,QAAAD,QAAA,QAAAgM,UACA,GAAAtG,SAAAC,KAAAsG,IAAAC,KAAAC,YAAAC,MACAC,OAAAxH,UAAA,GACA1D,EAAA,EACAK,OAAAqD,UAAArD,OACA8K,KAAA,KAGA,UAAAD,UAAA,UAAA,CACAC,KAAAD,MACAA,QAAAxH,UAAA,MAEA1D,GAAA,MACA,UAAAkL,UAAA,gBAAAA,UAAA,YAAAA,QAAA,KAAA,CACAA,UAGA,KAAAlL,EAAAK,SAAAL,EAAA,CACAuE,QAAAb,UAAA1D,EAEA,IAAAuE,SAAA,KAAA,CAEA,IAAAC,OAAAD,SAAA,CACAuG,IAAAI,OAAA1G,KACAuG,MAAAxG,QAAAC,KAGA,IAAA0G,SAAAH,KAAA,CAEA,GAAAI,MAAAJ,OAAAP,cAAAO,QAAAC,YAAAX,QAAAU,QAAA,CACA,GAAAC,YAAA,CACAA,YAAA,KACAC,OAAAH,KAAAT,QAAAS,KAAAA,WACA,CACAG,MAAAH,KAAAN,cAAAM,KAAAA,OAIAI,OAAA1G,MAAAqG,OAAAM,KAAAF,MAAAF,UAGA,UAAAA,QAAA,YAAA,CACAG,OAAA1G,MAAAuG,SAQA,MAAAG,mDCnFA,YAEA,IAAAE,KAAArH,OAAAiB,UAAAmF,cASA,SAAAkB,QAAA5I,OACA,MAAA6I,oBAAA7I,MAAA8I,QAAA,MAAA,MAUA,QAAAC,aAAAC,OACA,GAAAC,QAAA,sBACArJ,UACAsJ,IAEA,OAAAA,KAAAD,OAAAE,KAAAH,OAAA,CACA,GAAAxI,KAAAoI,OAAAM,KAAA,IACArI,MAAA+H,OAAAM,KAAA,GAOA,IAAA1I,MAAAZ,QAAA,QACAA,QAAAY,KAAAK,MAGA,MAAAjB,QAWA,QAAAwJ,gBAAApB,IAAAqB,QACAA,OAAAA,QAAA,EAEA,IAAAC,SAKA,IAAA,iBAAAD,QAAAA,OAAA,GAEA,KAAA,GAAA7I,OAAAwH,KAAA,CACA,GAAAW,IAAAhL,KAAAqK,IAAAxH,KAAA,CACA8I,MAAA/B,KAAApJ,mBAAAqC,KAAA,IAAArC,mBAAA6J,IAAAxH,QAIA,MAAA8I,OAAA1L,OAAAyL,OAAAC,MAAAnH,KAAA,KAAA,GAMA/F,QAAAmN,UAAAH,cACAhN,SAAAoN,MAAAT,sDC1EA,YAWA1M,QAAAD,QAAA,QAAAqN,UAAAC,KAAAC,UACAA,SAAAA,SAAAC,MAAA,KAAA,EACAF,OAAAA,IAEA,KAAAA,KAAA,MAAA,MAEA,QAAAC,UACA,IAAA,OACA,IAAA,KACA,MAAAD,QAAA,EAEA,KAAA,QACA,IAAA,MACA,MAAAA,QAAA,GAEA,KAAA,MACA,MAAAA,QAAA,EAEA,KAAA,SACA,MAAAA,QAAA,EAEA,KAAA,OACA,MAAA,OAGA,MAAAA,QAAA,+DCpCA,YAEA,IAAAD,UAAA3L,QAAA,iBACA+L,GAAA/L,QAAA,kBACAgM,WAAA,0CACAC,QAAA,+BAcA,IAAAC,SACA,IAAA,SACA,IAAA,SACA,QAAAC,UAAAC,SACA,MAAAA,SAAApB,QAAA,KAAA,OAEA,IAAA,aACA,IAAA,OAAA,IACAqB,IAAA,OAAAjJ,UAAA,EAAA,IACA,UAAA,OAAAA,UAAA,IACAiJ,IAAA,WAAAjJ,UAAA,EAAA,GAWA,IAAAkJ,SAAAC,KAAA,EAAArB,MAAA,EAcA,SAAAsB,WAAAC,KACA,GAAArE,UAAAxJ,QAAAA,OAAAwJ,YACAqE,KAAAA,KAAArE,QAEA,IAAAsE,qBACAxI,WAAAuI,KACA/J,GAEA,IAAA,UAAA+J,IAAAZ,SAAA,CACAa,iBAAA,GAAAC,KAAAvM,SAAAqM,IAAAG,kBACA,IAAA,WAAA1I,KAAA,CACAwI,iBAAA,GAAAC,KAAAF,OACA,KAAA/J,MAAA4J,cAAAI,kBAAAhK,SACA,IAAA,WAAAwB,KAAA,CACA,IAAAxB,MAAA+J,KAAA,CACA,GAAA/J,MAAA4J,QAAA,QACAI,kBAAAhK,KAAA+J,IAAA/J,KAGA,GAAAgK,iBAAAT,UAAA7I,UAAA,CACAsJ,iBAAAT,QAAAA,QAAAY,KAAAJ,IAAAK,OAIA,MAAAJ,kBAkBA,QAAAK,iBAAAX,SACA,GAAAY,OAAAhB,WAAAX,KAAAe,QAEA,QACAP,SAAAmB,MAAA,GAAAA,MAAA,GAAAC,cAAA,GACAhB,UAAAe,MAAA,GACAE,KAAAF,MAAA,IAYA,QAAAG,SAAAC,SAAAC,MACA,GAAAC,OAAAD,MAAA,KAAAvB,MAAA,KAAAvK,MAAA,GAAA,GAAAgM,OAAAH,SAAAtB,MAAA,MACArM,EAAA6N,KAAAxN,OACA0N,KAAAF,KAAA7N,EAAA,GACAgO,QAAA,MACAC,GAAA,CAEA,OAAAjO,IAAA,CACA,GAAA6N,KAAA7N,KAAA,IAAA,CACA6N,KAAAK,OAAAlO,EAAA,OACA,IAAA6N,KAAA7N,KAAA,KAAA,CACA6N,KAAAK,OAAAlO,EAAA,EACAiO,UACA,IAAAA,GAAA,CACA,GAAAjO,IAAA,EAAAgO,QAAA,IACAH,MAAAK,OAAAlO,EAAA,EACAiO,OAIA,GAAAD,QAAAH,KAAAG,QAAA,GACA,IAAAD,OAAA,KAAAA,OAAA,KAAAF,KAAA7D,KAAA,GAEA,OAAA6D,MAAAjJ,KAAA,KAiBA,QAAAsI,KAAAP,QAAAhE,SAAA+C,QACA,KAAArM,eAAA6N,MAAA,CACA,MAAA,IAAAA,KAAAP,QAAAhE,SAAA+C,QAGA,GAAAiC,UAAAQ,UAAAlC,MAAAmC,YAAAC,MAAApL,IACAqL,aAAA7B,MAAA3K,QACA2C,WAAAkE,UACArC,IAAAjH,KACAW,EAAA,CAaA,IAAA,WAAAyE,MAAA,WAAAA,KAAA,CACAiH,OAAA/C,QACAA,UAAA,KAGA,GAAA+C,QAAA,mBAAAA,QAAAA,OAAAY,GAAAL,KAEAtD,UAAAoE,UAAApE,SAKAwF,WAAAb,gBAAAX,SAAA,GACAgB,WAAAQ,UAAA/B,WAAA+B,UAAA3B,OACAlG,KAAAkG,QAAA2B,UAAA3B,SAAAmB,UAAAhF,SAAA6D,OACAlG,KAAA8F,SAAA+B,UAAA/B,UAAAzD,SAAAyD,UAAA,EACAO,SAAAwB,UAAAV,IAMA,KAAAU,UAAA3B,QAAA8B,aAAA,IAAA,OAAA,WAEA,MAAAtO,EAAAsO,aAAAjO,OAAAL,IAAA,CACAoO,YAAAE,aAAAtO,EAEA,UAAAoO,eAAA,WAAA,CACAzB,QAAAyB,YAAAzB,QACA,UAGAV,MAAAmC,YAAA,EACAnL,KAAAmL,YAAA,EAEA,IAAAnC,QAAAA,MAAA,CACA3F,IAAArD,KAAA0J,YACA,IAAA,iBAAAV,OAAA,CACA,KAAAoC,MAAA1B,QAAA4B,QAAAtC,QAAA,CACA,GAAA,iBAAAmC,aAAA,GAAA,CACA9H,IAAArD,KAAA0J,QAAA7K,MAAA,EAAAuM,MACA1B,SAAAA,QAAA7K,MAAAuM,MAAAD,YAAA,QACA,CACA9H,IAAArD,KAAA0J,QAAA7K,MAAAuM,MACA1B,SAAAA,QAAA7K,MAAA,EAAAuM,aAGA,IAAAA,MAAApC,MAAAL,KAAAe,SAAA,CACArG,IAAArD,KAAAoL,MAAA,EACA1B,SAAAA,QAAA7K,MAAA,EAAAuM,MAAAA,OAGA/H,IAAArD,KAAAqD,IAAArD,OACA0K,UAAAS,YAAA,GAAAzF,SAAA1F,MAAA,GAAA,GAOA,IAAAmL,YAAA,GAAA9H,IAAArD,KAAAqD,IAAArD,KAAAuK,cAQA,GAAA9B,OAAApF,IAAAmF,MAAAC,OAAApF,IAAAmF,MAKA,IACAkC,UACAhF,SAAA6D,SACAlG,IAAA6G,SAAAqB,OAAA,KAAA,MACAlI,IAAA6G,WAAA,IAAAxE,SAAAwE,WAAA,IACA,CACA7G,IAAA6G,SAAAO,QAAApH,IAAA6G,SAAAxE,SAAAwE,UAQA,IAAAjB,SAAA5F,IAAA6F,KAAA7F,IAAA8F,UAAA,CACA9F,IAAAmI,KAAAnI,IAAAoI,QACApI,KAAA6F,KAAA,GAMA7F,IAAAqI,SAAArI,IAAAsI,SAAA,EACA,IAAAtI,IAAAuI,KAAA,CACAT,YAAA9H,IAAAuI,KAAAxC,MAAA,IACA/F,KAAAqI,SAAAP,YAAA,IAAA,EACA9H,KAAAsI,SAAAR,YAAA,IAAA,GAGA9H,IAAArF,OAAAqF,IAAA8F,UAAA9F,IAAAmI,MAAAnI,IAAA8F,WAAA,QACA9F,IAAA8F,SAAA,KAAA9F,IAAAmI,KACA,MAKAnI,KAAA+G,KAAA/G,IAAAjF,WAgBA,QAAAyN,KAAAnD,KAAArI,MAAAyL,IACA,GAAAzI,KAAAjH,IAEA,QAAAsM,MACA,IAAA,QACA,GAAA,iBAAArI,QAAAA,MAAAjD,OAAA,CACAiD,OAAAyL,IAAAzC,GAAAL,OAAA3I,OAGAgD,IAAAqF,MAAArI,KACA,MAEA,KAAA,OACAgD,IAAAqF,MAAArI,KAEA,KAAA4I,SAAA5I,MAAAgD,IAAA8F,UAAA,CACA9F,IAAAmI,KAAAnI,IAAAoI,QACApI,KAAAqF,MAAA,OACA,IAAArI,MAAA,CACAgD,IAAAmI,KAAAnI,IAAAoI,SAAA,IAAApL,MAGA,KAEA,KAAA,WACAgD,IAAAqF,MAAArI,KAEA,IAAAgD,IAAA6F,KAAA7I,OAAA,IAAAgD,IAAA6F,IACA7F,KAAAmI,KAAAnL,KACA,MAEA,KAAA,OACAgD,IAAAqF,MAAArI,KAEA,IAAA,QAAA8J,KAAA9J,OAAA,CACAA,MAAAA,MAAA+I,MAAA,IACA/F,KAAA6F,KAAA7I,MAAA0L,KACA1I,KAAAoI,SAAApL,MAAAsB,KAAA,SACA,CACA0B,IAAAoI,SAAApL,KACAgD,KAAA6F,KAAA,GAGA,KAEA,KAAA,WACA7F,IAAA8F,SAAA9I,MAAAkK,aACAlH,KAAAkG,SAAAuC,EACA,MAEA,KAAA,WACA,IAAA,OACA,GAAAzL,MAAA,CACA,GAAA2L,MAAAtD,OAAA,WAAA,IAAA,GACArF,KAAAqF,MAAArI,MAAAkL,OAAA,KAAAS,KAAAA,KAAA3L,MAAAA,UACA,CACAgD,IAAAqF,MAAArI,MAEA,KAEA,SACAgD,IAAAqF,MAAArI,MAGA,IAAA,GAAAtD,GAAA,EAAAA,EAAAyM,MAAApM,OAAAL,IAAA,CACA,GAAAkP,KAAAzC,MAAAzM,EAEA,IAAAkP,IAAA,GAAA5I,IAAA4I,IAAA,IAAA5I,IAAA4I,IAAA,IAAA1B,cAGAlH,IAAArF,OAAAqF,IAAA8F,UAAA9F,IAAAmI,MAAAnI,IAAA8F,WAAA,QACA9F,IAAA8F,SAAA,KAAA9F,IAAAmI,KACA,MAEAnI,KAAA+G,KAAA/G,IAAAjF,UAEA,OAAAiF,KAUA,QAAAjF,UAAA2K,WACA,IAAAA,WAAA,mBAAAA,WAAAA,UAAAM,GAAAN,SAEA,IAAAP,OACAnF,IAAAjH,KACA+M,SAAA9F,IAAA8F,QAEA,IAAAA,UAAAA,SAAAoC,OAAApC,SAAA/L,OAAA,KAAA,IAAA+L,UAAA,GAEA,IAAA/J,QAAA+J,UAAA9F,IAAAkG,QAAA,KAAA,GAEA,IAAAlG,IAAAqI,SAAA,CACAtM,QAAAiE,IAAAqI,QACA,IAAArI,IAAAsI,SAAAvM,QAAA,IAAAiE,IAAAsI,QACAvM,SAAA,IAGAA,QAAAiE,IAAAmI,KAAAnI,IAAA6G,QAEA1B,OAAA,iBAAAnF,KAAAmF,MAAAO,UAAA1F,IAAAmF,OAAAnF,IAAAmF,KACA,IAAAA,MAAApJ,QAAA,MAAAoJ,MAAA+C,OAAA,GAAA,IAAA/C,MAAAA,KAEA,IAAAnF,IAAAwG,KAAAzK,QAAAiE,IAAAwG,IAEA,OAAAzK,QAGA6K,IAAAlI,WAAA8J,IAAAA,IAAAzN,SAAAA,SAMA6L,KAAAI,gBAAAA,eACAJ,KAAAvE,SAAAoE,SACAG,KAAAZ,GAAAA,EAEAxN,QAAAD,QAAAqO;;;;;;QXpagB,M,GAAA,M;;;cAFD,M;IAAR,I,WAAA,I;AAEA,SAAS,MAAT,CAAgB,IAAhB,EAAsB;AAC3B,SAAO,KAAK,SAAS,mBAAmB,IAAnB,CAAT,CAAL,CAAP;AACD;;AAEM,IAAM,oCAAc,UAAU,MAA9B;;;;;;;;QCLS,U,GAAA,U;QAIA,U,GAAA,U;;;;;;;;AAJT,SAAS,UAAT,GAAsB;AAC3B,SAAO,IAAI,OAAO,cAAX,EAAP;AACD,C;;;AAEM,SAAS,UAAT,CAAoB,MAApB,EAA4B,IAA5B,EAAkC;AACvC,SAAO,uBAAQ,IAAR,EAAc,MAAd,EAAsB,QAAtB,EAAP;AACD;;;;;;;;;;QCwBe,S,GAAA,S;;;;IAjCV,U;AACJ,WADI,UACJ,CAAY,IAAZ,EAAkB;AAAA,0BADd,UACc;;AAChB,SAAK,KAAL,GAAa,IAAb;AACA,SAAK,IAAL,GAAY,KAAK,IAAjB;AACD;;eAJG,U;;0BAME,K,EAAO,G,EAAK;AAChB,aAAO,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAwB,GAAxB,CAAP;AACD;;;4BAEO,CAAE;;;SAVN,U;;;IAaA,iB;AACJ,WADI,iBACJ,CAAY,IAAZ,EAAkB;AAAA,0BADd,iBACc;;AAChB,SAAK,KAAL,GAAa,IAAb;AACA,SAAK,IAAL,GAAY,KAAK,IAAjB;AACD;;eAJG,iB;;0BAMG,K,EAAO,G,EAAK,Q,EAAU;AAC3B,UAAI,SAAS,IAAI,UAAJ,EAAb;AACA,aAAO,MAAP,GAAgB,YAAM;AACpB,iBAAS,IAAI,UAAJ,CAAe,OAAO,MAAtB,CAAT;AACD,OAFD;AAGA,aAAO,OAAP,GAAiB,UAAC,GAAD,EAAS;AACxB,iBAAS,IAAT,EAAe,GAAf;AACD,OAFD;AAGA,aAAO,iBAAP,CAAyB,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAwB,GAAxB,CAAzB;AACD;;;4BAEQ,CAAE;;;SAjBP,iB;;;AAoBC,SAAS,SAAT,CAAmB,KAAnB,EAA0B;AAC/B,MAAI,OAAO,OAAO,QAAd,IAA0B,WAA1B,IAAyC,OAAO,OAAO,OAAd,IAAyB,WAAlE,IAAiF,OAAO,OAAO,OAAd,IAAyB,WAA9G,EAA2H;AACzH,WAAO,IAAI,iBAAJ,CAAsB,KAAtB,CAAP;AACD;;;;;AAKD,MAAI,OAAO,MAAM,KAAb,KAAuB,UAAvB,IAAqC,OAAO,MAAM,IAAb,KAAsB,WAA/D,EAA4E;AAC1E,WAAO,IAAI,UAAJ,CAAe,KAAf,CAAP;AACD;;AAED,QAAM,IAAI,KAAJ,CAAU,2EAAV,CAAN;AACD;;;;;;;;QCtBe,O,GAAA,O;QAKA,O,GAAA,O;QAKA,U,GAAA,U;;;AAhChB,IAAI,aAAa,KAAjB;AACA,IAAI;AACF,eAAa,kBAAkB,MAA/B;;;;AAIA,MAAI,MAAM,YAAV;AACA,eAAa,OAAb,CAAqB,GAArB,EAA0B,aAAa,OAAb,CAAqB,GAArB,CAA1B;AAED,CARD,CAQE,OAAO,CAAP,EAAU;;;;AAIV,MAAI,EAAE,IAAF,KAAW,EAAE,YAAb,IAA6B,EAAE,IAAF,KAAW,EAAE,kBAA9C,EAAkE;AAChE,iBAAa,KAAb;AACD,GAFD,MAEO;AACL,UAAM,CAAN;AACD;AACF;;AAEM,IAAM,sCAAe,UAArB;;AAEA,SAAS,OAAT,CAAiB,GAAjB,EAAsB,KAAtB,EAA6B;AAClC,MAAI,CAAC,UAAL,EAAiB;AACjB,SAAO,aAAa,OAAb,CAAqB,GAArB,EAA0B,KAA1B,CAAP;AACD;;AAEM,SAAS,OAAT,CAAiB,GAAjB,EAAsB;AAC3B,MAAI,CAAC,UAAL,EAAiB;AACjB,SAAO,aAAa,OAAb,CAAqB,GAArB,CAAP;AACD;;AAEM,SAAS,UAAT,CAAoB,GAApB,EAAyB;AAC9B,MAAI,CAAC,UAAL,EAAiB;AACjB,SAAO,aAAa,UAAb,CAAwB,GAAxB,CAAP;AACD;;;;;;;;;;;;;;;ICrCK,a;YAAA,a;;AACJ,WADI,aACJ,CAAY,KAAZ,EAAkD;AAAA,QAA/B,UAA+B,yDAAlB,IAAkB;AAAA,QAAZ,GAAY,yDAAN,IAAM;;AAAA,0BAD9C,aAC8C;;AAAA,uEAD9C,aAC8C,aAC1C,MAAM,OADoC;;AAGhD,UAAK,eAAL,GAAuB,GAAvB;AACA,UAAK,YAAL,GAAoB,UAApB;;AAEA,QAAI,UAAU,MAAM,OAApB;AACA,QAAI,cAAc,IAAlB,EAAwB;AACtB,kCAA0B,WAAW,QAAX,EAA1B;AACD;AACD,QAAI,OAAO,IAAX,EAAiB;AACf,gEAAwD,IAAI,MAA5D,yBAAsF,IAAI,YAA1F;AACD;AACD,UAAK,OAAL,GAAe,OAAf;AAbgD;AAcjD;;SAfG,a;EAAsB,K;;kBAkBb,a;;;;;;;;kBCZS,W;;;;;;;AAAT,SAAS,WAAT,CAAqB,IAArB,EAA2B,OAA3B,EAAoC;AACjD,SAAO,CACL,KADK,EAEL,KAAK,IAFA,EAGL,KAAK,IAHA,EAIL,KAAK,IAJA,EAKL,KAAK,YALA,EAML,QAAQ,QANH,EAOL,IAPK,CAOA,GAPA,CAAP;AAQD;;;;;;;;;;;;;;ICXM,c,oBAAA,c;;AACP,IAAI,oBAAJ;;AAEA,IAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;;AAAA,gBAEF,MAFE;AAAA,MAE1B,cAF0B,WAE1B,cAF0B;AAAA,MAEV,IAFU,WAEV,IAFU;;;AAIjC,gBACE,kBACA,IADA,IAEA,OAAO,KAAK,SAAL,CAAe,KAAtB,KAAgC,UAHlC;AAKD,CATD,MASO;;AAEL,gBAAc,IAAd;AACD;;;;;AAKD,OAAO,OAAP,GAAiB;AACf,0BADe;AAEf,0BAFe;AAGf,yBAzBM,YAsBS;AAIf;AAJe,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICfY,M;;;;IACA,O;;;;;;;;AAEZ,IAAM,iBAAiB;AACrB,YAAU,IADW;AAErB,oCAFqB;AAGrB,UAAQ,IAHa;AAIrB,cAAY,IAJS;AAKrB,mBAAiB,IALI;AAMrB,aAAW,IANU;AAOrB,WAAS,IAPY;AAQrB,WAAS,EARY;AASrB,aAAW,QATU;AAUrB,mBAAiB,KAVI;AAWrB,aAAW,IAXU;AAYrB,cAAY,IAZS;AAarB,uBAAqB,KAbA;AAcrB,eAAa,IAdQ;AAerB,8BAA4B;AAfP,CAAvB;;IAkBM,M;AACJ,WADI,MACJ,CAAY,IAAZ,EAAkB,OAAlB,EAA2B;AAAA,0BADvB,MACuB;;AACzB,SAAK,OAAL,GAAe,sBAAO,IAAP,EAAa,EAAb,EAAiB,cAAjB,EAAiC,OAAjC,CAAf;;;AAGA,SAAK,IAAL,GAAY,IAAZ;;;AAGA,SAAK,GAAL,GAAW,IAAX;;;AAGA,SAAK,IAAL,GAAY,IAAZ;;;AAGA,SAAK,YAAL,GAAoB,IAApB;;;AAGA,SAAK,OAAL,GAAe,IAAf;;;AAGA,SAAK,QAAL,GAAgB,KAAhB;;;AAGA,SAAK,KAAL,GAAa,IAAb;;;;;AAKA,SAAK,OAAL,GAAe,IAAf;;;AAGA,SAAK,aAAL,GAAqB,CAArB;;;AAGA,SAAK,aAAL,GAAqB,IAArB;;;AAGA,SAAK,kBAAL,GAA0B,CAA1B;AACD;;eAtCG,M;;4BAwCI;AAAA;;AACN,UAAI,OAAO,KAAK,IAAhB;;AAEA,UAAI,CAAC,IAAL,EAAW;AACT,aAAK,UAAL,CAAgB,IAAI,KAAJ,CAAU,2CAAV,CAAhB;AACA;AACD;;AAED,UAAI,CAAC,KAAK,OAAL,CAAa,QAAd,IAA0B,CAAC,KAAK,OAAL,CAAa,SAA5C,EAAuD;AACrD,aAAK,UAAL,CAAgB,IAAI,KAAJ,CAAU,uDAAV,CAAhB;AACA;AACD;;AAED,UAAI,SAAS,KAAK,OAAL,GAAe,YA3ExB,SA2EwB,EAAU,IAAV,EAAgB,KAAK,OAAL,CAAa,SAA7B,CAA5B;;;;AAIA,UAAI,KAAK,OAAL,CAAa,UAAb,IAA2B,IAA/B,EAAqC;AACnC,YAAI,OAAO,CAAC,KAAK,OAAL,CAAa,UAAzB;AACA,YAAI,MAAM,IAAN,CAAJ,EAAiB;AACf,gBAAM,IAAI,KAAJ,CAAU,uDAAV,CAAN;AACD;;AAED,aAAK,KAAL,GAAa,IAAb;AACD,OAPD,MAOO;AACL,YAAI,OAAO,OAAO,IAAlB;;;;AAIA,YAAI,QAAQ,IAAZ,EAAkB;AAChB,gBAAM,IAAI,KAAJ,CAAU,wHAAV,CAAN;AACD;;AAED,aAAK,KAAL,GAAa,IAAb;AACD;;AAED,UAAI,cAAc,KAAK,OAAL,CAAa,WAA/B;AACA,UAAI,eAAe,IAAnB,EAAyB;AACvB,YAAI,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,WAA/B,MAAgD,gBAApD,EAAsE;AACpE,gBAAM,IAAI,KAAJ,CAAU,+DAAV,CAAN;AACD,SAFD,MAEO;AAAA;AACL,gBAAI,gBAAgB,MAAK,OAAL,CAAa,OAAjC;AACA,kBAAK,OAAL,CAAa,OAAb,GAAuB,UAAC,GAAD,EAAS;;AAE9B,oBAAK,OAAL,CAAa,OAAb,GAAuB,aAAvB;;;;;AAKA,kBAAI,oBAAoB,MAAK,OAAL,IAAgB,IAAhB,IAAyB,MAAK,OAAL,GAAe,MAAK,kBAArE;AACA,kBAAI,iBAAJ,EAAuB;AACrB,sBAAK,aAAL,GAAqB,CAArB;AACD;;AAED,kBAAI,WAAW,IAAf;AACA,kBAAI,OAAO,MAAP,KAAkB,WAAlB,IACD,eAAe,MADd,IAED,OAAO,SAAP,CAAiB,MAAjB,KAA4B,KAF/B,EAEsC;AACjC,2BAAW,KAAX;AACD;;;;;;;AAOJ,kBAAI,cAAc,MAAK,aAAL,GAAqB,YAAY,MAAjC,IACA,IAAI,eAAJ,IAAuB,IADvB,IAEA,CAAC,iBAAiB,IAAI,eAAJ,CAAoB,MAArC,EAA6C,GAA7C,CAFD,IAGA,QAHlB;;AAKA,kBAAI,CAAC,WAAL,EAAkB;AAChB,sBAAK,UAAL,CAAgB,GAAhB;AACA;AACD;;AAED,kBAAI,QAAQ,YAAY,MAAK,aAAL,EAAZ,CAAZ;;AAEA,oBAAK,kBAAL,GAA0B,MAAK,OAA/B;AACA,oBAAK,OAAL,CAAa,SAAb,GAAyB,MAAK,GAA9B;;AAEA,oBAAK,aAAL,GAAqB,WAAW,YAAM;AACpC,sBAAK,KAAL;AACD,eAFoB,EAElB,KAFkB,CAArB;AAGD,aA1CD;AAFK;AA6CN;AACF;;;;;AAKD,WAAK,QAAL,GAAgB,KAAhB;;;AAGA,UAAI,KAAK,GAAL,IAAY,IAAhB,EAAsB;AACpB,aAAK,aAAL;AACA;AACD;;;AAGD,UAAI,KAAK,OAAL,CAAa,SAAb,IAA0B,IAA9B,EAAoC;AAChC,aAAK,GAAL,GAAW,KAAK,OAAL,CAAa,SAAxB;AACA,aAAK,aAAL;AACA;AACH;;;AAGD,UAAI,KAAK,OAAL,CAAa,MAAjB,EAAyB;AACrB,aAAK,YAAL,GAAoB,KAAK,OAAL,CAAa,WAAb,CAAyB,IAAzB,EAA+B,KAAK,OAApC,CAApB;AACA,YAAI,aAAa,QAAQ,OAAR,CAAgB,KAAK,YAArB,CAAjB;;AAEA,YAAI,cAAc,IAAlB,EAAwB;AACpB,eAAK,GAAL,GAAW,UAAX;AACA,eAAK,aAAL;AACA;AACH;AACJ;;;AAGD,WAAK,aAAL;AACD;;;4BAEO;AACN,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,aAAK,IAAL,CAAU,KAAV;AACA,aAAK,OAAL,CAAa,KAAb;AACA,aAAK,QAAL,GAAgB,IAAhB;AACD;;AAED,UAAI,KAAK,aAAL,IAAsB,IAA1B,EAAgC;AAC9B,qBAAa,KAAK,aAAlB;AACA,aAAK,aAAL,GAAqB,IAArB;AACD;AACF;;;kCAEa,G,EAAK,G,EAAK,U,EAAY;AAClC,WAAK,UAAL,CAAgB,oBAAkB,GAAlB,EAAuB,UAAvB,EAAmC,GAAnC,CAAhB;AACD;;;+BAEU,G,EAAK;AACd,UAAI,OAAO,KAAK,OAAL,CAAa,OAApB,KAAgC,UAApC,EAAgD;AAC9C,aAAK,OAAL,CAAa,OAAb,CAAqB,GAArB;AACD,OAFD,MAEO;AACL,cAAM,GAAN;AACD;AACF;;;mCAEc;AACb,UAAI,OAAO,KAAK,OAAL,CAAa,SAApB,KAAkC,UAAtC,EAAkD;AAChD,aAAK,OAAL,CAAa,SAAb;AACD;AACF;;;;;;;;;;;kCAQa,S,EAAW,U,EAAY;AACnC,UAAI,OAAO,KAAK,OAAL,CAAa,UAApB,KAAmC,UAAvC,EAAmD;AACjD,aAAK,OAAL,CAAa,UAAb,CAAwB,SAAxB,EAAmC,UAAnC;AACD;AACF;;;;;;;;;;;;;;uCAWkB,S,EAAW,a,EAAe,U,EAAY;AACvD,UAAI,OAAO,KAAK,OAAL,CAAa,eAApB,KAAwC,UAA5C,EAAwD;AACtD,aAAK,OAAL,CAAa,eAAb,CAA6B,SAA7B,EAAwC,aAAxC,EAAuD,UAAvD;AACD;AACF;;;;;;;;;;;8BAQS,G,EAAK;AACb,WAAK,IAAL,GAAY,GAAZ;;AAEA,UAAI,gBAAJ,CAAqB,eAArB,EAAsC,OAAtC;AACA,UAAI,UAAU,KAAK,OAAL,CAAa,OAA3B;;AAEA,WAAK,IAAI,IAAT,IAAiB,OAAjB,EAA0B;AACxB,YAAI,gBAAJ,CAAqB,IAArB,EAA2B,QAAQ,IAAR,CAA3B;AACD;;AAED,UAAI,eAAJ,GAAsB,KAAK,OAAL,CAAa,eAAnC;AACD;;;;;;;;;;;;oCASe;AAAA;;AACd,UAAI,CAAC,KAAK,OAAL,CAAa,QAAlB,EAA4B;AAC1B,aAAK,UAAL,CAAgB,IAAI,KAAJ,CAAU,8DAAV,CAAhB;AACA;AACD;;AAED,UAAI,MAAM,aAnRN,UAmRM,GAAV;AACA,UAAI,IAAJ,CAAS,MAAT,EAAiB,KAAK,OAAL,CAAa,QAA9B,EAAwC,IAAxC;;AAEA,UAAI,MAAJ,GAAa,YAAM;AACjB,YAAI,CAAC,iBAAiB,IAAI,MAArB,EAA6B,GAA7B,CAAL,EAAwC;AACtC,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,gDAAV,CAAxB;AACA;AACD;;AAED,YAAI,WAAW,IAAI,iBAAJ,CAAsB,UAAtB,CAAf;AACA,YAAI,YAAY,IAAhB,EAAsB;AACpB,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,yCAAV,CAAxB;AACA;AACD;;AAED,eAAK,GAAL,GAAW,aAlSG,UAkSH,EAAW,OAAK,OAAL,CAAa,QAAxB,EAAkC,QAAlC,CAAX;;AAEA,YAAI,OAAK,KAAL,KAAe,CAAnB,EAAsB;;AAEpB,iBAAK,YAAL;AACA,iBAAK,OAAL,CAAa,KAAb;AACA;AACD;;AAED,YAAI,OAAK,OAAL,CAAa,MAAjB,EAAyB;AACvB,kBAAQ,OAAR,CAAgB,OAAK,YAArB,EAAmC,OAAK,GAAxC;AACD;;AAED,eAAK,OAAL,GAAe,CAAf;AACA,eAAK,YAAL;AACD,OA3BD;;AA6BA,UAAI,OAAJ,GAAc,UAAC,GAAD,EAAS;AACrB,eAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,8BAAV,CAAxB,EAAmE,GAAnE;AACD,OAFD;;AAIA,WAAK,SAAL,CAAe,GAAf;AACA,UAAI,gBAAJ,CAAqB,eAArB,EAAsC,KAAK,KAA3C;;;AAGA,UAAI,WAAW,eAAe,KAAK,OAAL,CAAa,QAA5B,CAAf;AACA,UAAI,aAAa,EAAjB,EAAqB;AACjB,YAAI,gBAAJ,CAAqB,iBAArB,EAAwC,QAAxC;AACH;;AAED,UAAI,IAAJ,CAAS,IAAT;AACD;;;;;;;;;;;;oCASe;AAAA;;AACd,UAAI,MAAM,aA3UN,UA2UM,GAAV;AACA,UAAI,IAAJ,CAAS,MAAT,EAAiB,KAAK,GAAtB,EAA2B,IAA3B;;AAEA,UAAI,MAAJ,GAAa,YAAM;AACjB,YAAI,CAAC,iBAAiB,IAAI,MAArB,EAA6B,GAA7B,CAAL,EAAwC;AACtC,cAAI,OAAK,OAAL,CAAa,MAAb,IAAuB,iBAAiB,IAAI,MAArB,EAA6B,GAA7B,CAA3B,EAA8D;;;AAG5D,oBAAQ,UAAR,CAAmB,OAAK,YAAxB;AACD;;;;;;;AAOD,cAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACtB,mBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,8CAAV,CAAxB;AACA;AACD;;AAED,cAAI,CAAC,OAAK,OAAL,CAAa,QAAlB,EAA4B;;AAE1B,mBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,iFAAV,CAAxB;AACA;AACD;;;AAGD,iBAAK,GAAL,GAAW,IAAX;AACA,iBAAK,aAAL;AACA;AACD;;AAED,YAAI,SAAS,SAAS,IAAI,iBAAJ,CAAsB,eAAtB,CAAT,EAAiD,EAAjD,CAAb;AACA,YAAI,MAAM,MAAN,CAAJ,EAAmB;AACjB,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,sCAAV,CAAxB;AACA;AACD;;AAED,YAAI,SAAS,SAAS,IAAI,iBAAJ,CAAsB,eAAtB,CAAT,EAAiD,EAAjD,CAAb;AACA,YAAI,MAAM,MAAN,CAAJ,EAAmB;AACjB,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,sCAAV,CAAxB;AACA;AACD;;;;AAID,YAAI,WAAW,MAAf,EAAuB;AACrB,iBAAK,aAAL,CAAmB,MAAnB,EAA2B,MAA3B;AACA,iBAAK,YAAL;AACA;AACD;;AAED,eAAK,OAAL,GAAe,MAAf;AACA,eAAK,YAAL;AACD,OApDD;;AAsDA,UAAI,OAAJ,GAAc,UAAC,GAAD,EAAS;AACrB,eAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,8BAAV,CAAxB,EAAmE,GAAnE;AACD,OAFD;;AAIA,WAAK,SAAL,CAAe,GAAf;AACA,UAAI,IAAJ,CAAS,IAAT;AACD;;;;;;;;;;;;mCASc;AAAA;;;;;AAIb,UAAI,KAAK,QAAT,EAAmB;AACjB;AACD;;AAED,UAAI,MAAM,aA3ZN,UA2ZM,GAAV;;;;;AAKA,UAAI,KAAK,OAAL,CAAa,mBAAjB,EAAsC;AACpC,YAAI,IAAJ,CAAS,MAAT,EAAiB,KAAK,GAAtB,EAA2B,IAA3B;AACA,YAAI,gBAAJ,CAAqB,wBAArB,EAA+C,OAA/C;AACD,OAHD,MAGO;AACL,YAAI,IAAJ,CAAS,OAAT,EAAkB,KAAK,GAAvB,EAA4B,IAA5B;AACD;;AAED,UAAI,MAAJ,GAAa,YAAM;AACjB,YAAI,CAAC,iBAAiB,IAAI,MAArB,EAA6B,GAA7B,CAAL,EAAwC;AACtC,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,gDAAV,CAAxB;AACA;AACD;;AAED,YAAI,SAAS,SAAS,IAAI,iBAAJ,CAAsB,eAAtB,CAAT,EAAiD,EAAjD,CAAb;AACA,YAAI,MAAM,MAAN,CAAJ,EAAmB;AACjB,iBAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,sCAAV,CAAxB;AACA;AACD;;AAED,eAAK,aAAL,CAAmB,MAAnB,EAA2B,OAAK,KAAhC;AACA,eAAK,kBAAL,CAAwB,SAAS,OAAK,OAAtC,EAA+C,MAA/C,EAAuD,OAAK,KAA5D;;AAEA,eAAK,OAAL,GAAe,MAAf;;AAEA,YAAI,UAAU,OAAK,KAAnB,EAA0B;AACxB,cAAI,OAAK,OAAL,CAAa,0BAAb,IAA2C,OAAK,OAAL,CAAa,MAA5D,EAAoE;;;AAGlE,oBAAQ,UAAR,CAAmB,OAAK,YAAxB;AACD;;;AAGD,iBAAK,YAAL;AACA,iBAAK,OAAL,CAAa,KAAb;AACA;AACD;;AAED,eAAK,YAAL;AACD,OA/BD;;AAiCA,UAAI,OAAJ,GAAc,UAAC,GAAD,EAAS;;AAErB,YAAI,OAAK,QAAT,EAAmB;AACjB;AACD;;AAED,eAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAI,KAAJ,CAAU,2CAA2C,OAAK,OAA1D,CAAxB,EAA4F,GAA5F;AACD,OAPD;;;AAUA,UAAI,YAAY,GAAhB,EAAqB;AACnB,YAAI,MAAJ,CAAW,UAAX,GAAwB,UAAC,CAAD,EAAO;AAC7B,cAAI,CAAC,EAAE,gBAAP,EAAyB;AACvB;AACD;;AAED,iBAAK,aAAL,CAAmB,QAAQ,EAAE,MAA7B,EAAqC,OAAK,KAA1C;AACD,SAND;AAOD;;AAED,WAAK,SAAL,CAAe,GAAf;;AAEA,UAAI,gBAAJ,CAAqB,eAArB,EAAsC,KAAK,OAA3C;AACA,UAAI,gBAAJ,CAAqB,cAArB,EAAqC,iCAArC;;AAEA,UAAI,QAAQ,KAAK,OAAjB;AACA,UAAI,MAAM,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,SAAtC;;;;;AAKA,UAAI,QAAQ,QAAR,IAAoB,MAAM,KAAK,KAAnC,EAA0C;AACxC,cAAM,KAAK,KAAX;AACD;;AAED,UAAI,OAAO,OAAO,QAAd,IAA0B,WAA1B,IAAyC,OAAO,OAAO,OAAd,IAAyB,WAAlE,IAAiF,OAAO,OAAO,OAAd,IAAyB,WAA9G,EAA2H;AACzH,aAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,EAA0B,GAA1B,EAA+B,UAAC,SAAD,EAAY,KAAZ,EAAsB;AACnD,cAAI,KAAJ,EAAW;AACT,mBAAK,UAAL,CAAgB,oBAAkB,kDAAgD,KAAhD,GAAsD,QAAtD,GAA+D,GAA/D,GAAmE,SAAnE,GAA6E,OAAK,KAAlF,GAAwF,GAA1G,EAA+G,KAA/G,CAAhB;AACA;AACD;AACD,cAAI,IAAJ,CAAS,SAAT;AACD,SAND;AAOD,OARD,MAQO;AACL,YAAI,QAAQ,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,EAA0B,GAA1B,CAAZ;AACA,YAAI,IAAJ,CAAS,KAAT;AACD;;;AAGD,WAAK,aAAL,CAAmB,KAAK,OAAxB,EAAiC,KAAK,KAAtC;AACD;;;SAneG,M;;;AAseN,SAAS,cAAT,CAAwB,QAAxB,EAAkC;AAC9B,MAAI,CAAC,OAAO,WAAZ,EAAyB;AACrB,WAAO,EAAP;AACH;;AAED,MAAI,UAAU,EAAd;;AAEA,OAAK,IAAI,GAAT,IAAgB,QAAhB,EAA0B;AACtB,YAAQ,IAAR,CAAa,MAAM,GAAN,GAAY,OAAO,MAAP,CAAc,SAAS,GAAT,CAAd,CAAzB;AACH;;AAED,SAAO,QAAQ,IAAR,CAAa,GAAb,CAAP;AACH;;;;;;;;AAQD,SAAS,gBAAT,CAA0B,MAA1B,EAAkC,QAAlC,EAA4C;AAC1C,SAAQ,UAAU,QAAV,IAAsB,SAAU,WAAW,GAAnD;AACD;;AAED,OAAO,cAAP,GAAwB,cAAxB;;kBAEe,M;;;AC9hBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* global: window */\r\n\r\nconst {btoa} = window;\r\n\r\nexport function encode(data) {\r\n  return btoa(unescape(encodeURIComponent(data)));\r\n}\r\n\r\nexport const isSupported = \"btoa\" in window;\r\n","/* global window */\r\nimport URL from \"url-parse\";\r\n\r\nexport function newRequest() {\r\n  return new window.XMLHttpRequest();\r\n}\r\n\r\nexport function resolveUrl(origin, link) {\r\n  return new URL(link, origin).toString();\r\n}\r\n","class FileSource {\r\n  constructor(file) {\r\n    this._file = file;\r\n    this.size = file.size;\r\n  }\r\n\r\n  slice(start, end) {\r\n    return this._file.slice(start, end);\r\n  }\r\n\r\n  close() {}\r\n}\r\n\r\nclass CordovaFileSource {\r\n  constructor(file) {\r\n    this._file = file;\r\n    this.size = file.size;\r\n  }   \r\n\r\n   slice(start, end, callback) {\r\n    let reader = new FileReader();\r\n    reader.onload = () => {\r\n      callback(new Uint8Array(reader.result));\r\n    };\r\n    reader.onerror = (err) => {\r\n      callback(null, err);\r\n    };\r\n    reader.readAsArrayBuffer(this._file.slice(start, end));\r\n  }\r\n\r\n   close() {}   \r\n}\r\n\r\nexport function getSource(input) {\r\n  if (typeof window.PhoneGap != \"undefined\" || typeof window.Cordova != \"undefined\" || typeof window.cordova != \"undefined\") {\r\n    return new CordovaFileSource(input);\r\n  }\r\n  // Since we emulate the Blob type in our tests (not all target browsers\r\n  // support it), we cannot use `instanceof` for testing whether the input value\r\n  // can be handled. Instead, we simply check is the slice() function and the\r\n  // size property are available.\r\n  if (typeof input.slice === \"function\" && typeof input.size !== \"undefined\") {\r\n    return new FileSource(input);\r\n  }\r\n\r\n  throw new Error(\"source object may only be an instance of File or Blob in this environment\");\r\n}\r\n","/* global window, localStorage */\r\n\r\nlet hasStorage = false;\r\ntry {\r\n  hasStorage = \"localStorage\" in window;\r\n\r\n  // Attempt to store and read entries from the local storage to detect Private\r\n  // Mode on Safari on iOS (see #49)\r\n  var key = \"tusSupport\";\r\n  localStorage.setItem(key, localStorage.getItem(key));\r\n\r\n} catch (e) {\r\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\r\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\r\n  // thrown (see #49)\r\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\r\n    hasStorage = false;\r\n  } else {\r\n    throw e;\r\n  }\r\n}\r\n\r\nexport const canStoreURLs = hasStorage;\r\n\r\nexport function setItem(key, value) {\r\n  if (!hasStorage) return;\r\n  return localStorage.setItem(key, value);\r\n}\r\n\r\nexport function getItem(key) {\r\n  if (!hasStorage) return;\r\n  return localStorage.getItem(key);\r\n}\r\n\r\nexport function removeItem(key) {\r\n  if (!hasStorage) return;\r\n  return localStorage.removeItem(key);\r\n}\r\n","class DetailedError extends Error {\r\n  constructor(error, causingErr = null, xhr = null) {\r\n    super(error.message);\r\n\r\n    this.originalRequest = xhr;\r\n    this.causingError = causingErr;\r\n\r\n    let message = error.message;\r\n    if (causingErr != null) {\r\n      message += `, caused by ${causingErr.toString()}`;\r\n    }\r\n    if (xhr != null) {\r\n      message += `, originated from request (response code: ${xhr.status}, response text: ${xhr.responseText})`;\r\n    }\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nexport default DetailedError;\r\n","/**\r\n * Generate a fingerprint for a file which will be used the store the endpoint\r\n *\r\n * @param {File} file\r\n * @return {String}\r\n */\r\nexport default function fingerprint(file, options) {\r\n  return [\r\n    \"tus\",\r\n    file.name,\r\n    file.type,\r\n    file.size,\r\n    file.lastModified,\r\n    options.endpoint\r\n  ].join(\"-\");\r\n}\r\n","/* global window */\r\nimport Upload from \"./upload\";\r\nimport {canStoreURLs} from \"./node/storage\";\r\n\r\nconst {defaultOptions} = Upload;\r\nlet isSupported;\r\n\r\nif (typeof window !== \"undefined\") {\r\n  // Browser environment using XMLHttpRequest\r\n  const {XMLHttpRequest, Blob} = window;\r\n\r\n  isSupported = (\r\n    XMLHttpRequest &&\r\n    Blob &&\r\n    typeof Blob.prototype.slice === \"function\"\r\n  );\r\n} else {\r\n  // Node.js environment using http module\r\n  isSupported = true;\r\n}\r\n\r\n// The usage of the commonjs exporting syntax instead of the new ECMAScript\r\n// one is actually inteded and prevents weird behaviour if we are trying to\r\n// import this module in another module using Babel.\r\nmodule.exports = {\r\n  Upload,\r\n  isSupported,\r\n  canStoreURLs,\r\n  defaultOptions\r\n};\r\n","/* global window */\r\nimport fingerprint from \"./fingerprint\";\r\nimport DetailedError from \"./error\";\r\nimport extend from \"extend\";\r\n\r\n// We import the files used inside the Node environment which are rewritten\r\n// for browsers using the rules defined in the package.json\r\nimport {newRequest, resolveUrl} from \"./node/request\";\r\nimport {getSource} from \"./node/source\";\r\nimport * as Base64 from \"./node/base64\";\r\nimport * as Storage from \"./node/storage\";\r\n\r\nconst defaultOptions = {\r\n  endpoint: null,\r\n  fingerprint,\r\n  resume: true,\r\n  onProgress: null,\r\n  onChunkComplete: null,\r\n  onSuccess: null,\r\n  onError: null,\r\n  headers: {},\r\n  chunkSize: Infinity,\r\n  withCredentials: false,\r\n  uploadUrl: null,\r\n  uploadSize: null,\r\n  overridePatchMethod: false,\r\n  retryDelays: null,\r\n  removeFingerprintOnSuccess: false\r\n};\r\n\r\nclass Upload {\r\n  constructor(file, options) {\r\n    this.options = extend(true, {}, defaultOptions, options);\r\n\r\n    // The underlying File/Blob object\r\n    this.file = file;\r\n\r\n    // The URL against which the file will be uploaded\r\n    this.url = null;\r\n\r\n    // The underlying XHR object for the current PATCH request\r\n    this._xhr = null;\r\n\r\n    // The fingerpinrt for the current file (set after start())\r\n    this._fingerprint = null;\r\n\r\n    // The offset used in the current PATCH request\r\n    this._offset = null;\r\n\r\n    // True if the current PATCH request has been aborted\r\n    this._aborted = false;\r\n\r\n    // The file's size in bytes\r\n    this._size = null;\r\n\r\n    // The Source object which will wrap around the given file and provides us\r\n    // with a unified interface for getting its size and slice chunks from its\r\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\r\n    this._source = null;\r\n\r\n    // The current count of attempts which have been made. Null indicates none.\r\n    this._retryAttempt = 0;\r\n\r\n    // The timeout's ID which is used to delay the next retry\r\n    this._retryTimeout = null;\r\n\r\n    // The offset of the remote upload before the latest attempt was started.\r\n    this._offsetBeforeRetry = 0;\r\n  }\r\n\r\n  start() {\r\n    let file = this.file;\r\n\r\n    if (!file) {\r\n      this._emitError(new Error(\"tus: no file or stream to upload provided\"));\r\n      return;\r\n    }\r\n\r\n    if (!this.options.endpoint && !this.options.uploadUrl) {\r\n      this._emitError(new Error(\"tus: neither an endpoint or an upload URL is provided\"));\r\n      return;\r\n    }\r\n\r\n    let source = this._source = getSource(file, this.options.chunkSize);\r\n\r\n    // Firstly, check if the caller has supplied a manual upload size or else\r\n    // we will use the calculated size by the source object.\r\n    if (this.options.uploadSize != null) {\r\n      let size = +this.options.uploadSize;\r\n      if (isNaN(size)) {\r\n        throw new Error(\"tus: cannot convert `uploadSize` option into a number\");\r\n      }\r\n\r\n      this._size = size;\r\n    } else {\r\n      let size = source.size;\r\n\r\n      // The size property will be null if we cannot calculate the file's size,\r\n      // for example if you handle a stream.\r\n      if (size == null) {\r\n        throw new Error(\"tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option\");\r\n      }\r\n\r\n      this._size = size;\r\n    }\r\n\r\n    let retryDelays = this.options.retryDelays;\r\n    if (retryDelays != null) {\r\n      if (Object.prototype.toString.call(retryDelays) !== \"[object Array]\") {\r\n        throw new Error(\"tus: the `retryDelays` option must either be an array or null\");\r\n      } else {\r\n        let errorCallback = this.options.onError;\r\n        this.options.onError = (err) => {\r\n          // Restore the original error callback which may have been set.\r\n          this.options.onError = errorCallback;\r\n\r\n          // We will reset the attempt counter if\r\n          // - we were already able to connect to the server (offset != null) and\r\n          // - we were able to upload a small chunk of data to the server\r\n          let shouldResetDelays = this._offset != null && (this._offset > this._offsetBeforeRetry);\r\n          if (shouldResetDelays) {\r\n            this._retryAttempt = 0;\r\n          }\r\n\r\n          let isOnline = true;\r\n          if (typeof window !== \"undefined\" &&\r\n             \"navigator\" in window &&\r\n             window.navigator.onLine === false) {\r\n               isOnline = false;\r\n             }\r\n\r\n          // We only attempt a retry if\r\n          // - we didn't exceed the maxium number of retries, yet, and\r\n          // - this error was caused by a request or it's response and\r\n          // - the error is not a client error (status 4xx) and\r\n          // - the browser does not indicate that we are offline\r\n          let shouldRetry = this._retryAttempt < retryDelays.length &&\r\n                            err.originalRequest != null &&\r\n                            !inStatusCategory(err.originalRequest.status, 400) &&\r\n                            isOnline;\r\n\r\n          if (!shouldRetry) {\r\n            this._emitError(err);\r\n            return;\r\n          }\r\n\r\n          let delay = retryDelays[this._retryAttempt++];\r\n\r\n          this._offsetBeforeRetry = this._offset;\r\n          this.options.uploadUrl = this.url;\r\n\r\n          this._retryTimeout = setTimeout(() => {\r\n            this.start();\r\n          }, delay);\r\n        };\r\n      }\r\n    }\r\n\r\n    // Reset the aborted flag when the upload is started or else the\r\n    // _startUpload will stop before sending a request if the upload has been\r\n    // aborted previously.\r\n    this._aborted = false;\r\n\r\n    // The upload had been started previously and we should reuse this URL.\r\n    if (this.url != null) {\r\n      this._resumeUpload();\r\n      return;\r\n    }\r\n\r\n    // A URL has manually been specified, so we try to resume\r\n    if (this.options.uploadUrl != null) {\r\n        this.url = this.options.uploadUrl;\r\n        this._resumeUpload();\r\n        return;\r\n    }\r\n\r\n    // Try to find the endpoint for the file in the storage\r\n    if (this.options.resume) {\r\n        this._fingerprint = this.options.fingerprint(file, this.options);\r\n        let resumedUrl = Storage.getItem(this._fingerprint);\r\n\r\n        if (resumedUrl != null) {\r\n            this.url = resumedUrl;\r\n            this._resumeUpload();\r\n            return;\r\n        }\r\n    }\r\n\r\n    // An upload has not started for the file yet, so we start a new one\r\n    this._createUpload();\r\n  }\r\n\r\n  abort() {\r\n    if (this._xhr !== null) {\r\n      this._xhr.abort();\r\n      this._source.close();\r\n      this._aborted = true;\r\n    }\r\n\r\n    if (this._retryTimeout != null) {\r\n      clearTimeout(this._retryTimeout);\r\n      this._retryTimeout = null;\r\n    }\r\n  }\r\n\r\n  _emitXhrError(xhr, err, causingErr) {\r\n    this._emitError(new DetailedError(err, causingErr, xhr));\r\n  }\r\n\r\n  _emitError(err) {\r\n    if (typeof this.options.onError === \"function\") {\r\n      this.options.onError(err);\r\n    } else {\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  _emitSuccess() {\r\n    if (typeof this.options.onSuccess === \"function\") {\r\n      this.options.onSuccess();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Publishes notification when data has been sent to the server. This\r\n   * data may not have been accepted by the server yet.\r\n   * @param  {number} bytesSent  Number of bytes sent to the server.\r\n   * @param  {number} bytesTotal Total number of bytes to be sent to the server.\r\n   */\r\n  _emitProgress(bytesSent, bytesTotal) {\r\n    if (typeof this.options.onProgress === \"function\") {\r\n      this.options.onProgress(bytesSent, bytesTotal);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Publishes notification when a chunk of data has been sent to the server\r\n   * and accepted by the server.\r\n   * @param  {number} chunkSize  Size of the chunk that was accepted by the\r\n   *                             server.\r\n   * @param  {number} bytesAccepted Total number of bytes that have been\r\n   *                                accepted by the server.\r\n   * @param  {number} bytesTotal Total number of bytes to be sent to the server.\r\n   */\r\n  _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\r\n    if (typeof this.options.onChunkComplete === \"function\") {\r\n      this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the headers used in the request and the withCredentials property\r\n   * as defined in the options\r\n   *\r\n   * @param {XMLHttpRequest} xhr\r\n   */\r\n  _setupXHR(xhr) {\r\n    this._xhr = xhr;\r\n\r\n    xhr.setRequestHeader(\"Tus-Resumable\", \"1.0.0\");\r\n    let headers = this.options.headers;\r\n\r\n    for (let name in headers) {\r\n      xhr.setRequestHeader(name, headers[name]);\r\n    }\r\n\r\n    xhr.withCredentials = this.options.withCredentials;\r\n  }\r\n\r\n  /**\r\n   * Create a new upload using the creation extension by sending a POST\r\n   * request to the endpoint. After successful creation the file will be\r\n   * uploaded\r\n   *\r\n   * @api private\r\n   */\r\n  _createUpload() {\r\n    if (!this.options.endpoint) {\r\n      this._emitError(new Error(\"tus: unable to create upload because no endpoint is provided\"));\r\n      return;\r\n    }\r\n\r\n    let xhr = newRequest();\r\n    xhr.open(\"POST\", this.options.endpoint, true);\r\n\r\n    xhr.onload = () => {\r\n      if (!inStatusCategory(xhr.status, 200)) {\r\n        this._emitXhrError(xhr, new Error(\"tus: unexpected response while creating upload\"));\r\n        return;\r\n      }\r\n\r\n      let location = xhr.getResponseHeader(\"Location\");\r\n      if (location == null) {\r\n        this._emitXhrError(xhr, new Error(\"tus: invalid or missing Location header\"));\r\n        return;\r\n      }\r\n\r\n      this.url = resolveUrl(this.options.endpoint, location);\r\n\r\n      if (this._size === 0) {\r\n        // Nothing to upload and file was successfully created\r\n        this._emitSuccess();\r\n        this._source.close();\r\n        return;\r\n      }\r\n\r\n      if (this.options.resume) {\r\n        Storage.setItem(this._fingerprint, this.url);\r\n      }\r\n\r\n      this._offset = 0;\r\n      this._startUpload();\r\n    };\r\n\r\n    xhr.onerror = (err) => {\r\n      this._emitXhrError(xhr, new Error(\"tus: failed to create upload\"), err);\r\n    };\r\n\r\n    this._setupXHR(xhr);\r\n    xhr.setRequestHeader(\"Upload-Length\", this._size);\r\n\r\n    // Add metadata if values have been added\r\n    var metadata = encodeMetadata(this.options.metadata);\r\n    if (metadata !== \"\") {\r\n        xhr.setRequestHeader(\"Upload-Metadata\", metadata);\r\n    }\r\n\r\n    xhr.send(null);\r\n  }\r\n\r\n  /*\r\n   * Try to resume an existing upload. First a HEAD request will be sent\r\n   * to retrieve the offset. If the request fails a new upload will be\r\n   * created. In the case of a successful response the file will be uploaded.\r\n   *\r\n   * @api private\r\n   */\r\n  _resumeUpload() {\r\n    let xhr = newRequest();\r\n    xhr.open(\"HEAD\", this.url, true);\r\n\r\n    xhr.onload = () => {\r\n      if (!inStatusCategory(xhr.status, 200)) {\r\n        if (this.options.resume && inStatusCategory(xhr.status, 400)) {\r\n          // Remove stored fingerprint and corresponding endpoint,\r\n          // on client errors since the file can not be found\r\n          Storage.removeItem(this._fingerprint);\r\n        }\r\n\r\n        // If the upload is locked (indicated by the 423 Locked status code), we\r\n        // emit an error instead of directly starting a new upload. This way the\r\n        // retry logic can catch the error and will retry the upload. An upload\r\n        // is usually locked for a short period of time and will be available\r\n        // afterwards.\r\n        if (xhr.status === 423) {\r\n          this._emitXhrError(xhr, new Error(\"tus: upload is currently locked; retry later\"));\r\n          return;\r\n        }\r\n\r\n        if (!this.options.endpoint) {\r\n          // Don't attempt to create a new upload if no endpoint is provided.\r\n          this._emitXhrError(xhr, new Error(\"tus: unable to resume upload (new upload cannot be created without an endpoint)\"));\r\n          return;\r\n        }\r\n\r\n        // Try to create a new upload\r\n        this.url = null;\r\n        this._createUpload();\r\n        return;\r\n      }\r\n\r\n      let offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\r\n      if (isNaN(offset)) {\r\n        this._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\r\n        return;\r\n      }\r\n\r\n      let length = parseInt(xhr.getResponseHeader(\"Upload-Length\"), 10);\r\n      if (isNaN(length)) {\r\n        this._emitXhrError(xhr, new Error(\"tus: invalid or missing length value\"));\r\n        return;\r\n      }\r\n\r\n      // Upload has already been completed and we do not need to send additional\r\n      // data to the server\r\n      if (offset === length) {\r\n        this._emitProgress(length, length);\r\n        this._emitSuccess();\r\n        return;\r\n      }\r\n\r\n      this._offset = offset;\r\n      this._startUpload();\r\n    };\r\n\r\n    xhr.onerror = (err) => {\r\n      this._emitXhrError(xhr, new Error(\"tus: failed to resume upload\"), err);\r\n    };\r\n\r\n    this._setupXHR(xhr);\r\n    xhr.send(null);\r\n  }\r\n\r\n  /**\r\n   * Start uploading the file using PATCH requests. The file will be divided\r\n   * into chunks as specified in the chunkSize option. During the upload\r\n   * the onProgress event handler may be invoked multiple times.\r\n   *\r\n   * @api private\r\n   */\r\n  _startUpload() {\r\n    // If the upload has been aborted, we will not send the next PATCH request.\r\n    // This is important if the abort method was called during a callback, such\r\n    // as onChunkComplete or onProgress.\r\n    if (this._aborted) {\r\n      return;\r\n    }\r\n\r\n    let xhr = newRequest();\r\n\r\n    // Some browser and servers may not support the PATCH method. For those\r\n    // cases, you can tell tus-js-client to use a POST request with the\r\n    // X-HTTP-Method-Override header for simulating a PATCH request.\r\n    if (this.options.overridePatchMethod) {\r\n      xhr.open(\"POST\", this.url, true);\r\n      xhr.setRequestHeader(\"X-HTTP-Method-Override\", \"PATCH\");\r\n    } else {\r\n      xhr.open(\"PATCH\", this.url, true);\r\n    }\r\n\r\n    xhr.onload = () => {\r\n      if (!inStatusCategory(xhr.status, 200)) {\r\n        this._emitXhrError(xhr, new Error(\"tus: unexpected response while uploading chunk\"));\r\n        return;\r\n      }\r\n\r\n      let offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\r\n      if (isNaN(offset)) {\r\n        this._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\r\n        return;\r\n      }\r\n\r\n      this._emitProgress(offset, this._size);\r\n      this._emitChunkComplete(offset - this._offset, offset, this._size);\r\n\r\n      this._offset = offset;\r\n\r\n      if (offset == this._size) {\r\n        if (this.options.removeFingerprintOnSuccess && this.options.resume) {\r\n          // Remove stored fingerprint and corresponding endpoint. This causes\r\n          // new upload of the same file must be treated as a different file.\r\n          Storage.removeItem(this._fingerprint);\r\n        }\r\n\r\n        // Yay, finally done :)\r\n        this._emitSuccess();\r\n        this._source.close();\r\n        return;\r\n      }\r\n\r\n      this._startUpload();\r\n    };\r\n\r\n    xhr.onerror = (err) => {\r\n      // Don't emit an error if the upload was aborted manually\r\n      if (this._aborted) {\r\n        return;\r\n      }\r\n\r\n      this._emitXhrError(xhr, new Error(\"tus: failed to upload chunk at offset \" + this._offset), err);\r\n    };\r\n\r\n    // Test support for progress events before attaching an event listener\r\n    if (\"upload\" in xhr) {\r\n      xhr.upload.onprogress = (e) => {\r\n        if (!e.lengthComputable) {\r\n          return;\r\n        }\r\n\r\n        this._emitProgress(start + e.loaded, this._size);\r\n      };\r\n    }\r\n\r\n    this._setupXHR(xhr);\r\n\r\n    xhr.setRequestHeader(\"Upload-Offset\", this._offset);\r\n    xhr.setRequestHeader(\"Content-Type\", \"application/offset+octet-stream\");\r\n\r\n    let start = this._offset;\r\n    let end = this._offset + this.options.chunkSize;\r\n\r\n    // The specified chunkSize may be Infinity or the calcluated end position\r\n    // may exceed the file's size. In both cases, we limit the end position to\r\n    // the input's total size for simpler calculations and correctness.\r\n    if (end === Infinity || end > this._size) {\r\n      end = this._size;\r\n    }\r\n\r\n    if (typeof window.PhoneGap != \"undefined\" || typeof window.Cordova != \"undefined\" || typeof window.cordova != \"undefined\") {\r\n      this._source.slice(start, end, (fileChunk, error) => {\r\n        if (error) {\r\n          this._emitError(new DetailedError(\"tus: could not slice file or stream at start[\"+start+\"] end[\"+end+\"] size[\"+this._size+\"]\", error));    \r\n          return;\r\n        }\r\n        xhr.send(fileChunk);\r\n      });\r\n    } else {\r\n      var chunk = this._source.slice(start, end);\r\n      xhr.send(chunk);  \r\n    }\r\n\r\n    // Emit an progress event when a new chunk begins being uploaded.\r\n    this._emitProgress(this._offset, this._size);\r\n  }  \r\n}\r\n\r\nfunction encodeMetadata(metadata) {\r\n    if (!Base64.isSupported) {\r\n        return \"\";\r\n    }\r\n\r\n    var encoded = [];\r\n\r\n    for (var key in metadata) {\r\n        encoded.push(key + \" \" + Base64.encode(metadata[key]));\r\n    }\r\n\r\n    return encoded.join(\",\");\r\n}\r\n\r\n/**\r\n * Checks whether a given status is in the range of the expected category.\r\n * For example, only a status between 200 and 299 will satisfy the category 200.\r\n *\r\n * @api private\r\n */\r\nfunction inStatusCategory(status, category) {\r\n  return (status >= category && status < (category + 100));\r\n}\r\n\r\nUpload.defaultOptions = defaultOptions;\r\n\r\nexport default Upload;\r\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  return decodeURIComponent(input.replace(/\\+/g, ' '));\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    if (key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = [];\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      pairs.push(encodeURIComponent(key) +'='+ encodeURIComponent(obj[key]));\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//;\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address) {          // Sanitize what is left of the address\n    return address.replace('\\\\', '/');\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var location = global && global.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address) {\n  var match = protocolre.exec(address);\n\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} location Location defaults for relative paths.\n * @param {Boolean|Function} parser Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.qs = qs;\n\nmodule.exports = Url;\n"]}